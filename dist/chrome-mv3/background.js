var background=function(){"use strict";var t,s;function i(r){return r==null||typeof r=="function"?{main:r}:r}const o=(s=(t=globalThis.browser)==null?void 0:t.runtime)!=null&&s.id?globalThis.browser:globalThis.chrome,c=i(()=>{console.log("Hello background!",{id:o.runtime.id}),o.runtime.onMessage.addListener((r,a,d)=>{if(r.action==="CTG_toBackgroundResponse"&&console.log("URL:",r.response),r.action==="getCurrentUrl")return o.tabs.query({active:!0,currentWindow:!0},b=>{var u;const g=((u=b[0])==null?void 0:u.url)||"无法获取 URL";d({url:g})}),!0})});function h(){}function n(r,...a){}const l={debug:(...r)=>n(console.debug,...r),log:(...r)=>n(console.log,...r),warn:(...r)=>n(console.warn,...r),error:(...r)=>n(console.error,...r)};let e;try{e=c.main(),e instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(r){throw l.error("The background crashed on startup!"),r}return e}();
background;
